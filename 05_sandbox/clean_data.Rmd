---
title: "clean data"
author: "Randi Bolt"
date: "6/2/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
here::i_am("05_sandbox/clean_data.Rmd")
which_stat <- "PTS"
```

```{r}
# libraries 
library(magrittr)
library(dplyr)

# location of data 
location_of_stats_raw <- here::here("01_raw_data",
                                    "raw_data_stats.rds")
location_of_colors_raw <- here::here("01_raw_data",
                                     "raw_data_colors.rds")

# load data 
colors <- base::readRDS(location_of_colors_raw)
ttl_stat <- base::readRDS(location_of_stats_raw)
```

```{r}
# clean stat data -----------------------------------
# subset dataframe 
ttl_stat <- ttl_stat[[1]]

# rename column 2 to "Name"
base::names(ttl_stat)[2] <- "Name"

# Replace NA valuse with 0 (for stats)
ttl_stat[base::is.na(ttl_stat)] <- 0

# subset clean stat data ----------------------------
# subset Name and which_stat
subset_data <- ttl_stat %>%
  dplyr::select(Name, which_stat) %>%
  dplyr::rename(Name = Name,
                stat = which_stat) 

# select top 25% of players in this area
subset_data <- subset_data %>%
  dplyr::filter(stat >= base::unname(stats::quantile(subset_data$stat)))

# clean colors data ---------------------------------
# subset to df 17 
colors_table <- colors[[17]]

# rename column 2 to "hex"
base::names(colors_table)[2] <- "hex"

# subset just the hex 
hex_codes <- colors_table$hex

# color pallete 
col_pal <- colorRampPalette(hex_codes)(length(subset_data))
```



